- clean: ['~']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - mkdir -p ~/.httpie
  - mkdir -p ~/.gnupg
  - /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

- link:
    # Terminal:
    ~/.shell:
      path: config/shell
      create: true
    ~/.shell_env: config/home/shell_env
    ~/.bash_profile: config/home/bash_profile
    ~/.bashrc: config/home/bashrc
    ~/.zshrc: config/home/zshrc
    ~/.vimrc: config/home/vimrc
    ~/.hushlogin: config/home/hushlogin
    ~/.inputrc: config/home/inputrc
    ~/.kube-ps1: config/kube-ps1

    # Git:
    ~/.gitconfig: config/home/gitconfig
    ~/.gitignore_global: config/home/gitignore

    # Tools:
    ~/.httpie/config.json: config/home/httpie

    # Editors:
    ~/.editorconfig: config/home/editorconfig

    # Sublime text:
    "~/Library/Application Support/Sublime Text 3/Packages/User":
        path: apps/sublime-text-3
        create: true

    # iTerm2
    "~/Library/Preferences/com.googlecode.iterm2.plist": apps/iterm2/com.googlecode.iterm2.plist

- shell:
    - mkdir -p ~/Library/Application\ Support/Sublime\ Text\ 3/Installed\ Packages/
    - cp -f apps/sublime-text-3/ayu.sublime-package ~/Library/Application\ Support/Sublime\ Text\ 3/Installed\ Packages/

- brewfile:
   file: Brewfile
   no-upgrage: true

- shell:
    - curl -L https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh | sh
    - sudo chsh -s $(which zsh)

- pip:
    file: requirements.txt
    binary: /usr/local/opt/python/libexec/bin/pip

- pip:
    file: requirements-py3.txt
    binary: /usr/local/bin/pip3

- pipsi:
    file: requirements-pipsi.txt

- shell:
    # Disable the "Are you sure you want to open this application?" dialog
    - defaults write com.apple.LaunchServices LSQuarantine -bool false
    # Trackpad: enable tap to click for this user and for the login screen
    - defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
    - defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
    - defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
    # Enable full keyboard access for all controls
    # (e.g. enable Tab in modal dialogs)
    - defaults write NSGlobalDomain AppleKeyboardUIMode -int 3
    # Disable the warning before emptying the Trash
    - defaults write com.apple.finder WarnOnEmptyTrash -bool false
    # Show indicator lights for open applications in the Dock
    - defaults write com.apple.dock show-process-indicators -bool true
    # Disable local Time Machine backups
    - hash tmutil &> /dev/null && sudo tmutil disablelocal
    # Disable local Time Machine snapshots
    - sudo tmutil disablelocal
    # Show the main window when launching Activity Monitor
    - defaults write com.apple.ActivityMonitor OpenMainWindow -bool true
    # Visualize CPU usage in the Activity Monitor Dock icon
    - defaults write com.apple.ActivityMonitor IconType -int 5
    # Show all processes in Activity Monitor
    - defaults write com.apple.ActivityMonitor ShowCategory -int 0
    # Sort Activity Monitor results by CPU usage
    - defaults write com.apple.ActivityMonitor SortColumn -string "CPUUsage"
    - defaults write com.apple.ActivityMonitor SortDirection -int 0
    # Disable press-and-hold for keys in favor of key repeat
    - defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false
    # Disable auto-correct
    - defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool false
    # Require password immediately after sleep or screen saver begins
    - defaults write com.apple.screensaver askForPassword -int 1
    - defaults write com.apple.screensaver askForPasswordDelay -int 0
    # Save screenshots to the desktop
    - defaults write com.apple.screencapture location -string "$HOME/Desktop"
    # Save screenshots in PNG format (other options: BMP, GIF, JPG, PDF, TIFF)
    - defaults write com.apple.screencapture type -string "png"
    # Disable screenshot shadow
    - defaults write com.apple.screencapture disable-shadow -bool true
    # Show/Hide icons for hard drives, servers, and removable media on the desktop
    - defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool true
    - defaults write com.apple.finder ShowHardDrivesOnDesktop -bool false
    - defaults write com.apple.finder ShowMountedServersOnDesktop -bool true
    - defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool true
    # Finder: show status bar
    - defaults write com.apple.finder ShowStatusBar -bool true
    # Disable the warning when changing a file extension
    - defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false
    # Avoid creating .DS_Store files on network volumes
    - defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
    # Automatically open a new Finder window when a volume is mounted
    - defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true
    - defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true
    - defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true
    # Set the icon size of Dock items to 35 pixels
    - defaults write com.apple.dock tilesize -int 35
    #
    - dockutil --no-restart --add "/Applications/iTerm.app"
    - dockutil --no-restart --add "/Applications/Sublime Text.app"
    - dockutil --no-restart --add "/Applications/Sequel Pro.app"
    - dockutil --no-restart --add "/Applications/Postman.app"
    - dockutil --no-restart --add "/Applications/TeamViewer.app"
    - dockutil --no-restart --add "/Applications/Skype.app"
    - dockutil --no-restart --add "/Applications/Utilities/Activity Monitor.app"

# These links should be created after everything is installed:
- link:
    ~/.oh-my-zsh/themes/taybalt.zsh-theme: config/oh-my-zsh/taybalt.zsh-theme
    ~/.gnupg/gpg-agent.conf: config/home/gpgagent
